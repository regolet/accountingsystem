[build]
  command = "npm run build"
  publish = ".next"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[build.environment]
  NODE_VERSION = "18"
  # Skip database operations during build
  SKIP_ENV_VALIDATION = "true"

# Configure secrets scanning to ignore standard environment variable names
[build.processing.secrets]
  enabled = true
  # Omit standard configuration variables that are not actual secrets
  omit_keys = [
    "NODE_VERSION",
    "SKIP_ENV_VALIDATION", 
    "DATABASE_URL",
    "DIRECT_URL",
    "NEXTAUTH_URL",
    "NEXTAUTH_SECRET"
  ]
  # Omit files that contain environment variable examples/documentation
  omit_paths = [
    ".env.example",
    "README.md",
    "scripts/*",
    "prisma/schema.prisma"
  ]

[functions]
  # Configure functions for better performance
  node_bundler = "esbuild"